<HTML>
<PRE>
<H2>file: dui/src/dui_dslUnix.cc</H2>


/*:Copyright 1995, Lawrence Berkeley National Laboratory
*:&gt;---------------------------------------------------------------------
*:FILE:	dui_dslUnix.C
*:DESCRIPTION:	Functions to perform Unix commands on DSL entities.
*:AUTHOR:	cet - Craig E. Tull, cetull@lbl.gov
*:BUGS:	-- STILL IN DEVELOPMENT --
*:HISTORY:	11dec95-v000a-cet- creation
*:&lt;---------------------------------------------------------------------
*/

/*------------------------------------------------ INCLUDES           */
#include &lt;string.h&gt;
#include "asuAlloc.h"
#include "dstype.h"
#include "<A HREF="dui_types.h.html">dui_types.h</A>"

/*------------------------------------------------ GLOBALS            */
<B>#define <A NAME="DUI_LST_FORMAT">DUI_LST_FORMAT</A> "%1s %16s * %16s * %8d * %8d * %8d\n"</B>
<B>#define <A NAME="DUI_LSD_FORMAT">DUI_LSD_FORMAT</A> "%1s %16s * %16s * %8d * %8d * %8d\n"</B>
<B>#define <A NAME="DUI_LSH_FORMAT">DUI_LSH_FORMAT</A> "%1s %16s * %16s * %8s * %8s * %8s\n"</B>

/*
*:&gt;---------------------------------------------------------------------
*:ROUTINE:	int <A HREF="#dui_ls_l_Table">dui_ls_l_Table(</A>DS_DATASET_T *pDS, char*& listing)
*:DESCRIPTION:	<A HREF="duiClasses.cc.html#ls">ls</A> -l a DSL table
*:ARGUMENTS:	----------
*:RETURN VALUE:	-- NONE --
*:&lt;---------------------------------------------------------------------
*/
<B>int <A NAME="dui_ls_l_Table">dui_ls_l_Table(</A>DS_DATASET_T *pDS, char*& listing)</B>
{
   bool_t isTable;
   char *name, *tname;
   size_t rowcount, maxrowcount, rowsize;

   if( !dsIsTable(&isTable, pDS)
   ||  !isTable
   ||  !dsTableName(&name,pDS)
   ||  !dsTableTypeName(&tname,pDS)
   ||  !dsTableRowCount(&rowcount,pDS)
   ||  !dsTableMaxRowCount(&maxrowcount,pDS)
   ||  !dsTableRowSize(&rowsize,pDS)
   ){
      dsPerror("invalid DSL table");
      return FALSE;
   }
   char* result = (char*)ASUALLOC(256);
   sprintf(result,<A HREF="#DUI_LST_FORMAT">DUI_LST_FORMAT</A>
   		,"T",name,tname,rowcount,maxrowcount,rowsize);
   strcat(listing,result);
   return TRUE;
}

/*
*:&gt;---------------------------------------------------------------------
*:ROUTINE:	int <A HREF="#dui_ls_ld_Dataset">dui_ls_ld_Dataset(</A>DS_DATASET_T *pDS, char*& listing)
*:DESCRIPTION:	<A HREF="duiClasses.cc.html#ls">ls</A> -ld a DSL dataset
*:ARGUMENTS:	----------
*:RETURN VALUE:	-- NONE --
*:&lt;---------------------------------------------------------------------
*/
<B>int <A NAME="dui_ls_ld_Dataset">dui_ls_ld_Dataset(</A>DS_DATASET_T *pDS,char*& listing)</B>
{
   bool_t isDataset;
   char *name;
   size_t elcount, maxelcount;

   if( !dsIsDataset(&isDataset, pDS)
   ||  !isDataset
   ||  !dsDatasetName(&name,pDS)
   ||  !dsDatasetEntryCount(&elcount,pDS)
   ||  !dsDatasetMaxEntryCount(&maxelcount,pDS)
   ){
      dsPerror("invalid DSL dataset");
      return FALSE;
   }
   char* result = (char*)ASUALLOC(256);
   sprintf(result,<A HREF="#DUI_LSD_FORMAT">DUI_LSD_FORMAT</A>
   		,"D",name," ",elcount,maxelcount,-1);
   strcat(listing,result);
   return TRUE;
}

/*
*:&gt;---------------------------------------------------------------------
*:ROUTINE:	int <A HREF="#dui_ls_l_Dataset">dui_ls_l_Dataset(</A>DS_DATASET_T *pDS, char*& listing)
*:DESCRIPTION:	<A HREF="duiClasses.cc.html#ls">ls</A> -l a DSL dataset
*:ARGUMENTS:	----------
*:RETURN VALUE:	-- NONE --
*:&lt;---------------------------------------------------------------------
*/
<B>int <A NAME="dui_ls_l_Dataset">dui_ls_l_Dataset(</A>DS_DATASET_T *pDS, char*& listing)</B>
{
   bool_t isDataset,isTable;
   DS_DATASET_T *pEntry;
   size_t elcount;

   if( !dsIsDataset(&isDataset, pDS)
   ||  !isDataset
   ||  !dsDatasetEntryCount(&elcount,pDS)
   ){
      dsPerror("invalid DSL dataset");
      return FALSE;
   }
   <A HREF="#dui_ls_l_Header">dui_ls_l_Header(</A>listing);
   for( int i=0;i&lt;elcount;i++ ){
      if( !dsDatasetEntry(&pEntry,pDS,i)
      ||  !dsIsTable(&isTable, pEntry)
      ||  !dsIsDataset(&isDataset, pEntry)
      ||  !(isTable || isDataset)
      ){
	 dsPerror("bad DSL entry");
      } else {
	 if(isTable)<A HREF="#dui_ls_l_Table">dui_ls_l_Table(</A>pEntry,listing);
	 if(isDataset)<A HREF="#dui_ls_ld_Dataset">dui_ls_ld_Dataset(</A>pEntry,listing);
      }
   }
   return TRUE;
}

/*
*:&gt;---------------------------------------------------------------------
*:ROUTINE:	int <A HREF="#dui_ls_l_Header">dui_ls_l_Header(</A>char*& listing)
*:DESCRIPTION:	<A HREF="duiClasses.cc.html#ls">ls</A> -l Header string
*:ARGUMENTS:	----------
*:RETURN VALUE:	-- NONE --
*:&lt;---------------------------------------------------------------------
*/
<B>int <A NAME="dui_ls_l_Header">dui_ls_l_Header(</A>char*& listing)</B>
{
   char* result = (char*)ASUALLOC(256);
   sprintf(result,<A HREF="#DUI_LSH_FORMAT">DUI_LSH_FORMAT</A>
   		," "
		,"Name            "
		,"Type            "
		,"Used    "
		,"Alloc'd "
		,"Size    ");
//		,"123456789 123456789 "
   strcat(listing,result);
   return TRUE;
}

<P>
<P>
<HR>
<H2>Back to <A HREF="files.html">Source File Index</A></H2><P>
<P><HR>
<H5>C++ to HTML Conversion by <I><A HREF="http://www.usc.edu/dept/robotics/personal/af0a/tools/ctoohtml/ctoohtml.html">ctoohtml</A></I></H5>
















































</PRE>
</HTML>
