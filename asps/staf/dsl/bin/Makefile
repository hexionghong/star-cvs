# bin/Makefile
# Do not edit this file.
#
# CUSTOMIZE Makefile.control -------------------------------------------
-include Makefile.control
# 
default: bin
SLM_DIR := $(STAR_REF)/sys/mgr/slm
include $(SLM_DIR)/slm.mk
#
# CUSTOMIZE Makefile.user ----------------------------------------------
-include $(BASE_DIR)/Makefile.user
-include $(BIN_DIR)/Makefile.user
#
.PHONY: default all bin tas progs test install clean
#
ifneq ($(TAS)$(PROGS),$(EMPTY))
BIN := tas progs
else
BIN := $(EMPTY)
endif
bin: $(BIN)
#
tas: $(BIN_ARCH) $(MIDF_FILE)
	cd $(BIN_ARCH); \
	$(SLMAKE) MAKE_DEPEND=TRUE -f ../Makefile $(TAS)
#
progs: $(PROGS)
#
$(TAS): $(TAS_OBJ) $(LIB_LIBS)
	rm -f $@
	$(LD) -o $@ \
	$(LDFLAGS) \
	$^ \
	$(LD_PATH) $(LD_LIBS)
	chmod +x $@
#
$(PROGS): $(BIN_ARCH)
	cd $(BIN_ARCH); \
	$(SLMAKE) MAKE_DEPEND=TRUE -f ../Makefile $(addsuffix .o,$@); \
	$(SLMAKE) MAKE_DEPEND=TRUE PROGS=a.out -f ../Makefile $@
#
%: %.o $(LIB_LIBS)
	rm -f $@
	$(LD) -o $@ \
	$(LDFLAGS) \
	$^ \
	$(LD_PATH) $(MID_LIBS) $(TAS_LIBS) $(CERN_LIBS) $(OS_LIBS) \
	$(XM_LIBS)
	chmod +x $@
#
