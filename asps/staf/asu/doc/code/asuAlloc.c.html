<HTML>
<PRE>
<H2>file: asu/src/asuAlloc.c</H2>


#include "asuAlloc.h"

static int asuAllocCalls = 0;
static int asuFreeCalls = 0;
static int asuAllocSize = 0;
static int asuFreeSize = 0;
/*--------------------------------------------------------------------*/
<B>void <A NAME="asuAllocStats">asuAllocStats(</A>void)</B>
{
	printf("asuAllocStats: allocCalls %d, freeCalls %d, diff %d\n"
		, asuAllocCalls, asuFreeCalls
		, asuAllocCalls - asuFreeCalls);
	printf("asuAllocStats: allocSize %d, freeSize -, diff -\n"
		, asuAllocSize);
		/*, asuFreeSize , asuAllocSize - asuFreeSize);*/
}

/*--------------------------------------------------------------------*/
<B>int <A NAME="asuAllocDebugLevel">asuAllocDebugLevel(</A>int level)</B>
{
	static int debugLevel = 0;
	if(0 &lt;= level) debugLevel = level;
	return debugLevel;
}

/*--------------------------------------------------------------------*/
<B>void *<A NAME="asuAlloc">asuAlloc(</A>size_t size)</B>
{
	return <A HREF="#asuRealloc">asuRealloc(</A><A HREF="stafGeneric.h.html#NULL">NULL</A>, size);
}

/*--------------------------------------------------------------------*/
<B>void *<A NAME="asuCalloc">asuCalloc(</A>size_t nobj, size_t size)</B>
{
	asuAllocSize += size*nobj;
	asuAllocCalls++;
	return calloc(nobj, size);
}

/*--------------------------------------------------------------------*/
<B>void <A NAME="asuFree">asuFree(</A>void *ptr)</B>
{
	if (ptr != <A HREF="stafGeneric.h.html#NULL">NULL</A>) {
		asuFreeSize += sizeof *ptr;
		free((char *)ptr);
		asuFreeCalls++;
	}
}

/*--------------------------------------------------------------------*/
<B>void *<A NAME="asuRealloc">asuRealloc(</A>char *old, size_t size)</B>
{
	char *ptr;

	if (size == 0){
		printf("ZERO_LENGTH_ALLOC\n"); /* HACK */
	}
	if ((ptr = (old == <A HREF="stafGeneric.h.html#NULL">NULL</A> ? malloc(size) : realloc(old, size))) != <A HREF="stafGeneric.h.html#NULL">NULL</A>) {
		if (old == <A HREF="stafGeneric.h.html#NULL">NULL</A>) {
			asuAllocSize += size;
			asuAllocCalls++;
		}
		return ptr;
	}
	else {
		printf("NOT_ENOUGH_MEMORY\n");
		}
	return <A HREF="stafGeneric.h.html#NULL">NULL</A>;
}

<P>
<P>
<HR>
<H2>Back to <A HREF="files.html">Source File Index</A></H2><P>
<P><HR>
<H5>C++ to HTML Conversion by <I><A HREF="http://www.usc.edu/dept/robotics/personal/af0a/tools/ctoohtml/ctoohtml.html">ctoohtml</A></I></H5>
















































</PRE>
</HTML>
