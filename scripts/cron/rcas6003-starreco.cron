# DO NOT EDIT THIS FILE - edit the master and reinstall.
# (/tmp/crontab.11045 installed on Fri Jan 17 19:01:20 2003)
# (Cron version -- $Id: rcas6003-starreco.cron,v 1.10 2008/12/15 22:01:27 jeromel Exp $)
# Nightly tests jobs

00 03 * * * /star/u/starreco/devtest/submit_dev.csh >& /star/u/starreco/devtest/TestSubm.log 
00 02 * * * /star/u/starreco/dotdevtest/subm_dotdev.csh  >& /star/u/starreco/dotdevtest/TestSubm.log

#00 08,10 * * * /star/u/starreco/dev_gridsubm/mv.dev.logfiles.pl >& /star/u/starreco/dev_gridsubm/mvlog.log
#00 07 * * * /star/u/didenko/dev/prodscripts/DAQupdate.pl  2008 >& /star/u/starreco/DAQupdate.log
#00 09,22 * * * /star/u/didenko/dev/scripts/DAQfill.FC.pl  2007 >& /star/u/starreco/DAQfill.FC.log

01 * * * *  /usr/bin/test -e /star/u/starreco/dbupdateDEV.log || /bin/date >/star/u/starreco/dbupdateDEV.log
05 08,12,16 * * * /star/u/starreco/bin/updateDEV.csh >& /star/u/starreco/dbupdateDEV.log

01 * * * *  /usr/bin/test -e /star/u/starreco/updateDotDEV.log || /bin/date >/star/u/starreco/updateDotDEV.log
05 08,12,16 * * * /star/u/starreco/bin/updateDotDEV.csh >& /star/u/starreco/updateDotDEV.log


# CRS job status update
#02,12,22,32,42,52 * * * * /afs/rhic/star/packages/scripts/CRSjobs.pl >& /star/u/starreco/JobsStatus.log
#*/2 * * * *    /afs/rhic.bnl.gov/star/packages/scripts/TokenTest.csh


## Sanity jobs run (Profiling / Insure++)
#00 02 * * 1 cd /star/rcf/test/dev/Insure ; ./SanityTests.pl -prof -1  >>~/Sanity.log
#00 02 * * 2 cd /star/rcf/test/dev/Insure ; ./SanityTests.pl -valg -1  >>~/Sanity.log
#00 02 * * 3 cd /star/rcf/test/dev/Insure ; ./SanityTests.pl       -1  >>~/Sanity.log


#+
# Cleaning section for 'dev' test area and FastOffline log files
#-
00 00    * * 0 cd /star/rcf/prodlog/dev/log/daq && find -ctime +12 -exec rm -f {} \; >&/dev/null
01 00    * * 0 cd /star/rcf/prodlog/dev/log/daq && find -ctime  +7 -exec mv -f {} old/ \; >&/dev/null
01 00    * * 2,4,6 unset noclobber ; echo ""                                      >FastOffline.log
01 00    * * 2,4,6 unset noclobber ; echo ""                                      >FastOffCheck.log
01 00    * * 2,4,6 unset noclobber ; echo ""                                      >ScanLog.log
01 00    * * 0     unset noclobber ; echo ""                                      >Sanity.log
01 00    * * 0     unset noclobber ; echo ""                                      >AutoCalib.log



# Cleaning of empty directories in data disk
05 07,19 * * * /usr/bin/test -e /star/u/starreco/bin/CleanEmptyDir &&  /star/u/starreco/bin/CleanEmptyDir 


#+
# Database filling from Offline to Online = FastOffline
#-
# Removed /afs/rhic.bnl.gov/star/packages/scripts/DAQFill.csh Insert . Do by hand now ...This is only
# to refill from the start (which takes a long time at the end of a run). The real filling
# is done by the 'Run' task (Update isonly a bootstrap).
#
# Disabled after the run but bypass - all entries need to be on during
#
##02 01,13 * * * /afs/rhic.bnl.gov/star/packages/scripts/DAQFill.csh Insert                >>FastOffline.log    
#02 00,12 * * * /afs/rhic.bnl.gov/star/packages/scripts/DAQFill.csh Clean                 >>FastOffline.log
#02 23,11 * * * /afs/rhic.bnl.gov/star/packages/scripts/DAQFill.csh Update                >>FastOffline.log
#04,14,24,34,44,54 * * * * /afs/rhic.bnl.gov/star/packages/scripts/DAQFill.csh Run 300    >>FastOffline.log

# FastOffline output-check. Enabling this also make the old file deleted ...
# This needs to be enabled for each disks (no spanning syntax yet)
24,54 *  * * * /afs/rhic.bnl.gov/star/packages/scripts/CRSUtils/FastOffCheck.pl dev  /star/data09/reco 14 >>FastOffCheck.log
28,58 *  * * * /afs/rhic.bnl.gov/star/packages/scripts/CRSUtils/FastOffCheck.pl dev  /star/data10/reco 14 >>FastOffCheck.log

# Automated calibration
43 08,14,20,02 * * * /star/u/starreco/scripts/LoadLaserDriftVelocityToDb.csh /star/data10/calib/tpcDriftVelocity  >& AutoCalib.log
#44 00,01,02,03,04,05,06,07,08,09,10,11 * * * /star/u/starreco/scripts/procTpcFieldCageShorts.csh >>AutoCalib.log
#44 12,13,14,15,16,17,18,19,20,21,22,23 * * * /star/u/starreco/scripts/procTpcFieldCageShorts.csh >>AutoCalib.log


#+
# Log file scanning 
#-
06,36 *  * * * /usr/bin/test -e /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl && /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl dev        >>ScanLog.log
08,38 *  * * * /usr/bin/test -e /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl && /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl DEV        >>ScanLog.log
16,46 *  * * * /usr/bin/test -e /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl && /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl P08ic     >>ScanLog.log
#16,46 *  * * * /usr/bin/test -e /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl && /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl P05if     >>ScanLog.log
#16,46 *  * * * /usr/bin/test -e /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl && /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl P05ic      >>ScanLog.log
#16,46 *  * * * /usr/bin/test -e /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl && /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl P05ia      >>ScanLog.log
#16,46 *  * * * /usr/bin/test -e /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl && /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl P04ik      >>ScanLog.log
#16,46 *  * * * /usr/bin/test -e /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl && /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl P04ie      >>ScanLog.log
#16,46 *  * * * /usr/bin/test -e /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl && /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl P04id      >>ScanLog.log
#26,56 *  * * * /usr/bin/test -e /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl && /afs/rhic.bnl.gov/star/packages/scripts/ScanLog.pl SL03f      >>ScanLog.log


# Auto-deletion scheme. Once a day should be fine. Timing has to be off 
# spidering to be sure.
10 11 * * * /star/u/starreco/bin/FCrmNFS.csh

# Every so often, check files marked sanity=0 or available < 0 and delete them
04 02,05,08,11,14,17,20,23 * * * /star/u/starreco/bin/FCdel

# Every so often, delete records marked available=0
# Accumulation of those will hinder Spider-ing speed but cleaning too
# often would not be good either ... uddb target is done at 03 mnts
10 02 * * 0,3 /star/u/starreco/bin/FCCleanup  

